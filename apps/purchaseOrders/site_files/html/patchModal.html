<div id="patchModalModal" class="modal" fixed>
  <div class="modal-content">
    <div class="modal-header">
      <span class="close">&times;</span>
      <p class="center">##word.Patch Modal## <i class="fa fa-file"></i></p>
    </div>

    <div class="modal-body">
      <form class="form">
        <fieldset>
          <legend>
            <i-button type="add default" ng-click="addNewPatch(patch)"></i-button>
          </legend>
          <div class="row">
            <div class="col4">
              <table class="table loaded center bold hover details">
                <tr>
                  <th>##word.Required Count##</th>
                  <th>##word.Current Count##</th>
                </tr>

                <tr>
                  <td>
                    <p class="green">{{patch.count + patch.bonusCount}}</p>
                  </td>
                  <td>
                    <p class="blue">{{patch.$patchCount}}</p>
                  </td>
                </tr>
              </table>
            </div>
          </div>
          <div class="row">
            <table class="table loaded center bold hover details">
              <tr>
                <th>##word.Patch Code##</th>
                <th>##word.Production Date##</th>
                <th ng-hide="patch.workBySerial">##word.Expiry Date##</th>
                <th ng-hide="patch.workBySerial">##word.validit##</th>
                <th>##word.quantity##</th>
                <th>##word.actions##</th>
              </tr>

              <tr ng-repeat="c in patch.patchesList">
                <td>
                  <i-control v="r" ng-model="c.code"></i-control>
                </td>

                <td>
                  <i-date ng-click="changeDate(c,'pro')" ng-model="c.productionDate"></i-date>
                </td>

                <td ng-hide="patch.workBySerial">
                  <i-date ng-click="changeDate(c,'exp')" ng-model="c.expiryDate"></i-date>
                </td>

                <td ng-hide="patch.workBySerial">
                  <i-control ng-change="changeDate(c,'pro')" type="number" ng-model="c.validityDays"></i-control>
                </td>

                <td>
                  <i-control type="number" v="r" ng-change="calcPatch(patch)" ng-disabled="patch.workBySerial" ng-model="c.count"> </i-control>
                </td>
                <td>
                  <p>
                    <i-button type="delete" ng-click="patch.patchesList.splice($index,1);calcPatch(patch)"> </i-button>
                  </p>
                </td>
              </tr>
            </table>
          </div>
        </fieldset>
      </form>
    </div>

    <p class="error">{{errorPatch}}</p>

    <div class="modal-footer center">
      <i-button type="save" label="##word.Save##" ng-click="savePatch(patch)"> </i-button>
    </div>
  </div>
  <div class="col2"></div>
</div>
